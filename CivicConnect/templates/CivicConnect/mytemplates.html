{% extends 'CivicConnect/base.html' %}

{% load crispy_forms_tags %}

{% load bootstrap4 %}

{% block content %}
  {% load socialaccount %}
    <br>
    {% if user.is_authenticated %}
        <h1 style="text-align:center;">Your Templates: {{ user.username }}</h1>
        <div id="accordion" class="p-5">
	        {% for t in template %}
		        <div class="card text-center">
			        <div class="card-header" id="heading_{{ forloop.counter0 }}">
                        <h1 class="mb-0">
                        <button class="btn btn-link" data-toggle="collapse" data-target="#collapse_{{ forloop.counter0 }}" aria-expanded="false" aria-controls="collapse_{{ forloop.counter0 }}">
                            {% if t.approved %}
                                {{ t.topic }} (Approved)
                            {% else %}
                                {{ t.topic }} (Not Approved Yet)
                            {% endif %}
                        </button>
				    </h1>
			        </div>
			    <div id="collapse_{{ forloop.counter0 }}" class="collapse show" aria-labelledby="heading_{{ forloop.counter0 }}" data-parent="#accordion">
				    <div class="card-body">
						<p class="card-text">{{ t.template }}</p>
					 	<hr style="width:90%;text-align:center">
					 	{{ t.date_posted }}, By: {{ t.author }}
					 	<hr style="width:90%;text-align:center">
				    </div>
			 </div>
		 </div>
	 {% endfor %}
</div>
    {% else %}
        <div style="text-align:center;">
          <a href="{% provider_login_url 'google' %}">Login with Google</a>
        </div>
    {% endif %}



{% endblock %}